<!-- extends the base html -->

{% extends 'base.html' %}

{% block title %} SF Ballot History {% endblock %}

{% block content %}
<!-- Make form -->
<section class="container">
  <h1 class="p-5">SF Ballot History 1907 - 2020</h1>

  <form action="/search" id="searchForm" method="POST" class="mt-3 mb-5">
    {{ form.hidden_tag() }}

    {% for field in form if field.widget.input_type != 'hidden' %}

    <div class='form-col mb-4'>
      <div class="col mb-1">
        {{field.label}}

        {{ field(class="search-field form-control") }}

        {% for error in field.errors %}
        <span class="text-danger">{{ error }}</span>
        {% endfor %}
      </div>

      {% endfor %}
    </div>

    <div class="text-center">
      <button type="submit" class="btn btn-primary ">Search</button>

    </div>

  </form>

</section>

<div class="d-flex p-5 justify-content-center">
  <h4>Ballot Propositions in {{year}}: </h4>
</div>

<!-- Make area to populate list of ballot> -->
<section id="ballotList" class="row">
  {% for ballot in ballots %}
  <div data-ballot-id="${ballot.subject}" class="Show col-md-6 col-lg-5 mb-4 ml-5">
    <div class="media">
      <h4 src="" alt="" class="w-2 mr-4">{{ballot.prop_letter}}</h4>
      <div class="media-body">
        <h5 class="text-primary">{{ballot.ballot_subject}}</h5>
        <div class="type-of-measure"> Type of Measure: <b> {{ballot.type_of_measure}}</b></div>
        <div class="month"> Date: <b> {{(ballot.month)}} {{ballot.year}}</b></div>
        <div class="pass-fail"> <b>Status: {{ "Pass" if ballot.pass_or_fail == "P" else "Fail" }}</b></div>
        <!-- <div class="percent"> Percent of Yes Votes: {{"%.4f"|format(ballot.percent_vote|float)}}</div> -->
        <div class="percent"> {{display_vote_percents(ballot.percent_vote)}}</div>

        <table class="table table-bordered table-sm col-6 table-secondary">
          <thead class="">
            <tr class="">
              <th scope="col">Yes Votes</th>
              <th scope="col">No Votes</th>
            </tr>
          </thead>
          <tbody>
            <!-- Will take out votes string: {{ballot.vote_counts}} -->
            <tr class="">
              <th scope="row">{{yes_votes(ballot.vote_counts)}}</th>
              <th scope="row">{{no_votes(ballot.vote_counts)}}</th>
            </tr>
          </tbody>
        </table>


      </div>
    </div>
  </div>

  {% endfor %}


</section>
{% endblock %}